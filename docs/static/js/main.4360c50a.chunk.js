(this["webpackJsonpr3f-template"]=this["webpackJsonpr3f-template"]||[]).push([[0],{44:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){"use strict";n.r(t);var i=n(1),o=n.n(i),r=n(28),a=n.n(r),c=(n(44),n(5)),s=n(20),u=n(55),j=n(12),b=n(18),l=n(3),p=n(52),m=n(4);var f=function(e){var t=Object(p.a)("assets/fire/fire.png");return Object(m.jsx)(i.Suspense,{fallback:null,children:Object(m.jsx)("sprite",Object(l.a)(Object(l.a)({scale:2},e),{},{children:Object(m.jsx)("spriteMaterial",{map:t,alphaMap:t})}))})};var d=function(e){var t=Object(s.b)((function(){return Object(l.a)({mass:.2,position:[0,5,0],velocity:[0,4,0]},e)})),n=Object(c.a)(t,1)[0];return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(f,{}),Object(m.jsxs)("mesh",{ref:n,children:[Object(m.jsx)("boxBufferGeometry",{}),Object(m.jsx)("meshPhysicalMaterial",{})]})]})},h=n(34),O=function(e){var t=Object(i.useRef)(),n=Object(j.f)(h.a,""+e.path);return Object(m.jsx)("group",{ref:t,children:Object(m.jsxs)("mesh",{rotation:[Math.PI/2,0,0],children:[Object(m.jsx)("primitive",{object:n.scene,scale:[1.5,1.5,1.5],position:e.position}),";"]})})};var v=function(e){var t=Object(s.c)((function(){return Object(l.a)({rotation:[-Math.PI/2,0,0]},e)})),n=Object(c.a)(t,1)[0];return Object(m.jsxs)("mesh",{ref:n,children:[Object(m.jsx)(O,{path:"/assets/map2/BASKETBALL/BASKETBALL.gltf",position:[15,-24,13]}),Object(m.jsx)(O,{path:"/assets/map2/BASE2/BASE.gltf",position:[15,-24,13]}),Object(m.jsx)(O,{path:"/assets/map2/TEST/TEST.gltf",position:[15,-24,13]})]})},x=n(54),g=n(0),y=n(11);function A(e){return{KeyW:"moveForward",KeyS:"moveBackward",KeyA:"moveLeft",KeyD:"moveRight",Space:"jump"}[e]}var w=Object(b.b)({key:"position",default:{position:[0,0,0],rotation:[0,0,0]}}),k=(Object(b.b)({key:"camera",default:{position:[0,0,0],rotation:[0,0,0]}}),Object(b.b)({key:"socket",default:void 0}),function(e){var t=e.position,n=void 0===t?[0,0,0]:t,i=e.offset,o=void 0===i?[0,0,0]:i,r=e.dims,a=void 0===r?[1,1,1]:r,u=e.visible,l=void 0!==u&&u,p=e.children,f=Object(s.b)((function(){return{mass:1,args:a,position:n}})),d=Object(c.a)(f,2),h=d[0],O=d[1],v=Object(b.c)(w),x=v.position,g=v.rotation;return Object(j.e)((function(e){e.clock;O.position.set(x[0],x[1],x[2]),O.rotation.set(g[0],g[1],g[2])})),Object(m.jsxs)("group",{ref:h,api:O,children:[Object(m.jsxs)("mesh",{scale:a,visible:l,children:[Object(m.jsx)("boxBufferGeometry",{}),Object(m.jsx)("meshPhysicalMaterial",{wireframe:!0})]}),Object(m.jsx)("group",{position:o,children:p})]})}),T=function(e){var t,n,o,r=Object(i.useRef)(),a=Object(i.useState)(0),s=Object(c.a)(a,2),u=s[0],p=s[1],f=Object(i.useRef)(),d=function(){var e=Object(i.useState)({moveForward:!1,moveBackward:!1,moveLeft:!1,moveRight:!1,jump:!1}),t=Object(c.a)(e,2),n=t[0],o=t[1];return Object(i.useEffect)((function(){var e=function(e){o((function(t){return Object(l.a)(Object(l.a)({},t),{},Object(y.a)({},A(e.code),!0))}))},t=function(e){o((function(t){return Object(l.a)(Object(l.a)({},t),{},Object(y.a)({},A(e.code),!1))}))};return document.addEventListener("keydown",e),document.addEventListener("keyup",t),function(){document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}}),[]),n}(),O=d.moveForward,v=d.moveBackward,T=d.moveLeft,S=d.moveRight,L=e.path,E=Object(j.f)(h.a,L),B=Object(b.d)(w),F=Object(j.g)().camera,M=(o=new g.AnimationMixer(E.scene)).clipAction(E.animations[null!==(t=e.idleIndex)&&void 0!==t?t:0]),V=o.clipAction(E.animations[null!==(n=e.walkIndex)&&void 0!==n?n:1]);return E.animations.length>0&&o.stopAllAction(),Object(j.e)((function(e,t){p(O|v|T|S?1:0),o.update(t)})),Object(j.e)((function(e){e.clock;var t=new g.Vector3,n=new g.Vector3(0,0,Number(v)-Number(O)),i=new g.Vector3(Number(T)-Number(S),0,0);t.subVectors(n,i).normalize().multiplyScalar(.1).applyEuler(F.rotation),B((function(e){var n=[e.position[0]+t.x,1,e.position[2]+t.z],i=F.rotation.toArray();return r.current.target.position=new g.Vector3(n[0],F.position.y,n[2]),{position:n,rotation:[0,i[2]+Math.PI,0]}}))})),Object(i.useEffect)((function(){if(o.stopAllAction(),1===u)V.setLoop(g.LoopRepeat),V.play();else M.setLoop(g.LoopRepeat),M.play()}),[u,V,M,o]),Object(m.jsx)("group",{ref:f,up:[0,1,0],children:Object(m.jsxs)(k,{visible:!0,up:[0,0,0],position:[0,2.4,0],dims:[1.5,2,1.5],rotation:[0,0,0],children:[Object(m.jsx)(x.a,{ref:r}),Object(m.jsx)("primitive",{object:E.scene,path:e.path,scale:[2,2,2],position:[0,-1,0]})]})})},S=n(53),L=Object(S.a)({uTime:{value:0}},'\n// Uniforms are data that are shared between shaders\n// The contain data that are uniform across the entire frame.\n// The heightmap and scaling constant for each point are uniforms in this respect.\n\n// A uniform to contain the heightmap image\nuniform sampler2D bumpTexture;\n// A uniform to contain the scaling constant\nuniform float bumpScale;\nuniform float uTime;\n\n// Varyings are variables whose values are decided in the vertext shader\n// But whose values are then needed in the fragment shader\n\n// A variable to store the height of the point\nvarying float vAmount;\n// The UV mapping coordinates of a vertex\nvarying vec2 vUV;\n\nvoid main()\n{\n    // The "coordinates" in UV mapping representation\n    vUV = uv;\n\n    // The heightmap data at those coordinates\n    vec4 bumpData = texture2D(bumpTexture, uv);\n\n    // height map is grayscale, so it doesn\'t matter if you use r, g, or b.\n    vAmount = bumpData.r;\n\n    // move the position along the normal\n    vec3 newPosition = position + normal * bumpScale * vAmount;\n\n    // Compute the position of the vertex using a standard formula\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(newPosition, 1.0);\n}\n',"\nvarying vec2 vUV;\nvarying float vAmount;\nuniform float uTime;\n\nvoid main()\n{\n    gl_FragColor = vec4(sin(uTime*5.0), vAmount, 0.0, 1.0);\n}\n");Object(j.d)({EShaderMaterial:L});var E=function(){var e=Object(i.useRef)();return Object(j.e)((function(t){var n=t.clock;return e.current.uTime=n.getElapsedTime()})),Object(m.jsxs)("mesh",{position:[1,1,1],children:[Object(m.jsx)("boxBufferGeometry",{args:[1,1,1]}),Object(m.jsx)("eShaderMaterial",{ref:e,side:g.DoubleSide,alphamap:!0}),Object(m.jsx)("planeBufferGeometry",{args:[10,10,16,16]})]})},B=["px.png","nx.png","py.png","ny.png","nz.png","pz.png"].map((function(e){return"/assets/skyboxes/city/"+e}));function F(){return function(e){var t=Object(j.g)().scene;Object(i.useEffect)((function(){var n=(new g.CubeTextureLoader).load(e);t.background=n,t.environment=n}),[e,t.background,t])}(B),Object(m.jsx)(m.Fragment,{})}function M(e,t){return Math.random()*(t-e)+e}n(49);function V(){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("ambientLight",{intensity:.2,color:"#FAAD37"}),Object(m.jsx)("directionalLight",{position:[70,100,0],color:"#FAAD37",intensity:1}),Object(m.jsx)(F,{}),Object(m.jsx)(E,{}),Object(m.jsxs)(i.Suspense,{fallback:null,children:[Object(m.jsx)(v,{}),new Array(15).fill(0).map((function(e){return Object(m.jsx)(d,{position:[M(-4,4),M(1,10),M(-4,4)],scale:[.1,.1,.15],rotation:[M(.1,25),0,0]})})),Object(m.jsx)(T,{path:"assets/marie_survivor/scene.gltf",walkIndex:15,idleIndex:0})]})]})}var P=function(){return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(j.a,{camera:{position:[7,7,7]},children:Object(m.jsxs)(b.a,{children:[Object(m.jsx)(s.a,{children:Object(m.jsx)(V,{})}),Object(m.jsx)(u.a,{})]})})})};var D=function(){return Object(m.jsx)(m.Fragment,{})};var I=function(){var e=Object(i.useState)(0),t=Object(c.a)(e,2),n=t[0],o=t[1];return Object(m.jsx)("div",{style:{width:"100%",height:"100%"},children:1===n?Object(m.jsx)(P,{}):2===n?Object(m.jsx)(D,{}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return o(1)},children:"\uc2dc\uc791\ud558\uae301"}),Object(m.jsx)("button",{onClick:function(){return o(2)},children:"\uc2dc\uc791\ud558\uae302"})]})})},R=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,56)).then((function(t){var n=t.getCLS,i=t.getFID,o=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),i(e),o(e),r(e),a(e)}))};a.a.render(Object(m.jsx)(o.a.StrictMode,{children:Object(m.jsx)(I,{})}),document.getElementById("root")),R()}},[[50,1,2]]]);
//# sourceMappingURL=main.4360c50a.chunk.js.map