(this["webpackJsonpr3f-template"]=this["webpackJsonpr3f-template"]||[]).push([[0],{58:function(e,t,n){},60:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var c=n(1),o=n.n(c),i=n(37),r=n.n(i),s=(n(58),n(8)),a=n(26),j=n(72),u=n(73),b=n(12),l=n(18),O=n(0),f=(n(60),n(3)),p=n(71),d=n(5);var m=function(e){var t=Object(p.a)("assets/fire/fire.png");return Object(d.jsx)(c.Suspense,{fallback:null,children:Object(d.jsx)("sprite",Object(f.a)(Object(f.a)({scale:2},e),{},{children:Object(d.jsx)("spriteMaterial",{map:t,alphaMap:t})}))})};var x=function(e){var t=Object(a.b)((function(){return Object(f.a)({mass:.2,position:[0,5,0],velocity:[0,4,0]},e)})),n=Object(s.a)(t,1)[0];return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(m,{}),Object(d.jsxs)("mesh",{ref:n,children:[Object(d.jsx)("boxBufferGeometry",{}),Object(d.jsx)("meshPhysicalMaterial",{})]})]})},h=n(43),v=function(e){var t=Object(c.useRef)(),n=Object(b.e)(h.a,""+e.path);return Object(d.jsx)("group",{ref:t,children:Object(d.jsxs)("mesh",{rotation:[Math.PI/2,0,0],children:[Object(d.jsx)("primitive",{object:n.scene,scale:[1.5,1.5,1.5],position:e.position}),";"]})})};var g=function(e){var t=Object(a.c)((function(){return Object(f.a)({rotation:[-Math.PI/2,0,0]},e)})),n=Object(s.a)(t,1)[0];return Object(d.jsxs)("mesh",{ref:n,children:[Object(d.jsx)(v,{path:"/assets/map2/BASKETBALL/BASKETBALL.gltf",position:[15,-24,13]}),Object(d.jsx)(v,{path:"/assets/map2/BASE2/BASE.gltf",position:[15,-24,13]}),Object(d.jsx)(v,{path:"/assets/map2/TEST/TEST.gltf",position:[15,-24,13]})]})},y=n(11);function k(e){return{KeyW:"moveForward",KeyS:"moveBackward",KeyA:"moveLeft",KeyD:"moveRight",Space:"jump"}[e]}var w=Object(l.b)({key:"position",default:{position:[0,0,0],rotation:[0,0,0]}}),L=(Object(l.b)({key:"camera",default:{position:[0,0,0],rotation:[0,0,0]}}),Object(l.b)({key:"socket",default:void 0})),S=function(e){var t=e.position,n=void 0===t?[0,0,0]:t,c=e.offset,o=void 0===c?[0,0,0]:c,i=e.dims,r=void 0===i?[1,1,1]:i,j=e.visible,u=void 0!==j&&j,O=e.children,f=Object(a.b)((function(){return{mass:1,args:r,position:n}})),p=Object(s.a)(f,2),m=p[0],x=p[1],h=Object(l.d)(w),v=h.position,g=h.rotation;return Object(b.d)((function(e){e.clock;x.position.set(v[0],v[1],v[2]),x.rotation.set(g[0],g[1],g[2])})),Object(d.jsxs)("group",{ref:m,api:x,children:[Object(d.jsxs)("mesh",{scale:r,visible:u,children:[Object(d.jsx)("boxBufferGeometry",{}),Object(d.jsx)("meshPhysicalMaterial",{wireframe:!0})]}),Object(d.jsx)("group",{position:o,children:O})]})},E=function(e){var t,n,o,i=Object(c.useRef)(),r=Object(c.useState)(0),a=Object(s.a)(r,2),u=a[0],p=a[1],m=Object(c.useRef)(),x=function(){var e=Object(c.useState)({moveForward:!1,moveBackward:!1,moveLeft:!1,moveRight:!1,jump:!1}),t=Object(s.a)(e,2),n=t[0],o=t[1];return Object(c.useEffect)((function(){var e=function(e){o((function(t){return Object(f.a)(Object(f.a)({},t),{},Object(y.a)({},k(e.code),!0))}))},t=function(e){o((function(t){return Object(f.a)(Object(f.a)({},t),{},Object(y.a)({},k(e.code),!1))}))};return document.addEventListener("keydown",e),document.addEventListener("keyup",t),function(){document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}}),[]),n}(),v=x.moveForward,g=x.moveBackward,L=x.moveLeft,E=x.moveRight,A=e.path,B=Object(b.e)(h.a,A),F=Object(l.e)(w),M=Object(b.f)().camera,T=(o=new O.AnimationMixer(B.scene)).clipAction(B.animations[null!==(t=e.idleIndex)&&void 0!==t?t:0]),R=o.clipAction(B.animations[null!==(n=e.walkIndex)&&void 0!==n?n:1]);return B.animations.length>0&&o.stopAllAction(),Object(b.d)((function(e,t){p(v|g|L|E?1:0),o.update(t)})),Object(b.d)((function(e){e.clock;var t=new O.Vector3,n=new O.Vector3(0,0,Number(g)-Number(v)),c=new O.Vector3(Number(L)-Number(E),0,0);t.subVectors(n,c).normalize().multiplyScalar(.1).applyEuler(M.rotation),F((function(e){var n=[e.position[0]+t.x,1,e.position[2]+t.z],c=M.rotation.toArray();return i.current.target.position=new O.Vector3(n[0],M.position.y,n[2]),{position:n,rotation:[0,c[2]+Math.PI,0]}}))})),Object(c.useEffect)((function(){if(o.stopAllAction(),1===u)R.setLoop(O.LoopRepeat),R.play();else T.setLoop(O.LoopRepeat),T.play()}),[u,R,T,o]),Object(d.jsx)("group",{ref:m,up:[0,1,0],children:Object(d.jsxs)(S,{visible:!0,up:[0,0,0],position:[0,2.4,0],dims:[1.5,2,1.5],rotation:[0,0,0],children:[Object(d.jsx)(j.a,{ref:i}),Object(d.jsx)("primitive",{object:B.scene,path:e.path,scale:[2,2,2],position:[0,-1,0]})]})})},A=["px.png","nx.png","py.png","ny.png","nz.png","pz.png"].map((function(e){return"/assets/skyboxes/city/"+e}));function B(){return function(e){var t=Object(b.f)().scene;Object(c.useEffect)((function(){var n=(new O.CubeTextureLoader).load(e);t.background=n,t.environment=n}),[e,t.background,t])}(A),Object(d.jsx)(d.Fragment,{})}function F(e,t){return Math.random()*(t-e)+e}function M(){var e=Object(c.useRef)();return Object(b.d)((function(t){console.log("orbitRef.current.target.position",e.current.target.position),e.current.target.position=new O.Vector3(3*Math.sin(.5*t),0,0),e.current.update()})),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("ambientLight",{intensity:.2}),Object(d.jsx)("pointLight",{position:[70,100,0],color:"blue",intensity:20}),Object(d.jsx)("pointLight",{position:[-70,80,-20],color:"pink",intensity:20}),Object(d.jsx)(j.a,{ref:e,minDistance:1,maxDistance:20,target:[0,2.5,0]}),Object(d.jsx)(B,{}),Object(d.jsxs)(c.Suspense,{fallback:null,children:[Object(d.jsx)(g,{}),new Array(15).fill(0).map((function(e){return Object(d.jsx)(x,{position:[F(-4,4),F(1,10),F(-4,4)],scale:[.1,.1,.15],rotation:[F(.1,25),0,0]})})),Object(d.jsx)(E,{path:"assets/marie_survivor/scene.gltf",walkIndex:15,idleIndex:0})]})]})}var T=function(){return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(b.a,{camera:{position:[7,7,7]},children:Object(d.jsxs)(l.a,{children:[Object(d.jsx)(a.a,{children:Object(d.jsx)(M,{})}),Object(d.jsx)(u.a,{})]})})})},R=n(13),I=n(54);function C(){var e=I.a.connect("http://localhost:9000",{transports:["websocket"]}),t=Object(c.useState)(0),n=Object(s.a)(t,2),o=n[0],i=(n[1],Object(c.useState)(["yo"])),r=Object(s.a)(i,2),a=r[0],j=r[1],u=Object(l.c)(L),b=Object(s.a)(u,2);b[0];(0,b[1])(e);return Object(c.useEffect)((function(){return e.on("connect",(function(t){e.emit("message-client","\uc5f0\uacb0\ub428."),console.log("connected",t),e.emit("name","Tom")})),e.on("seq-num",(function(e){console.info(e)})),e.on("message",(function(e){console.info(e)})),e.emit("end")}),[]),Object(c.useEffect)((function(){var e;e="count ".concat(o),j((function(t){return[].concat(Object(R.a)(t),[e])}))}),[o]),Object(d.jsxs)("div",{children:[Object(d.jsx)("button",{onClick:function(){e.emit("message-client","Tom")},children:"asdfa"}),a.map((function(e,t){return Object(d.jsxs)("div",{children:[e,Object(d.jsx)("br",{})]},"".concat(e,"-").concat(t))}))]})}var P=function(){return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(C,{})})};var K=function(){var e=Object(c.useState)(0),t=Object(s.a)(e,2),n=t[0],o=t[1];return Object(d.jsx)("div",{style:{width:"100%",height:"100%"},children:1===n?Object(d.jsx)(T,{}):2===n?Object(d.jsx)(P,{}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("button",{onClick:function(){return o(1)},children:"\uc2dc\uc791\ud558\uae301"}),Object(d.jsx)("button",{onClick:function(){return o(2)},children:"\uc2dc\uc791\ud558\uae302"})]})})},V=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,74)).then((function(t){var n=t.getCLS,c=t.getFID,o=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),c(e),o(e),i(e),r(e)}))};r.a.render(Object(d.jsx)(o.a.StrictMode,{children:Object(d.jsx)(K,{})}),document.getElementById("root")),V()}},[[69,1,2]]]);
//# sourceMappingURL=main.1f787c20.chunk.js.map