{"version":3,"sources":["components/Fire/Fire.jsx","components/CubePhysical.jsx","components/Plane/PlaneModel.jsx","components/Plane/Plane.jsx","hooks/useKeyboard.js","state.js","components/PlayerModel/BoundingBox.jsx","components/PlayerModel/PlayerModel.jsx","components/ShaderPlane/ShaderPlane.jsx","components/SkyBox/SkyBox.jsx","utils/getRandom.js","Scenes/Scene1.js","Scenes/Scene2.js","App.js","reportWebVitals.js","index.js"],"names":["Fire","props","colorMap","useTexture","fallback","scale","map","alphaMap","CubePhysical","useBox","mass","position","velocity","ref","PlaneModel","modelRef","useRef","model","useLoader","GLTFLoader","process","path","rotation","Math","PI","object","scene","Plane","usePlane","moveFieldByKey","key","KeyW","KeyS","KeyA","KeyD","Space","$player","atom","default","BoundingBoxPhysical","undefined","offset","dims","visible","children","args","api","useRecoilValue","pPosition","useFrame","clock","set","wireframe","PlayerModel","mixer","orbitRef","useState","animState","setAnimState","moveForward","moveBackward","moveLeft","moveRight","jump","movement","setMovement","useEffect","handleKeyDown","e","m","code","handleKeyUp","document","addEventListener","removeEventListener","useKeyboard","setPlayerPosition","useSetRecoilState","camera","useThree","action_idle","AnimationMixer","clipAction","animations","idleIndex","action_walk","walkIndex","length","stopAllAction","delta","update","direction","Vector3","frontVector","Number","sideVector","subVectors","normalize","multiplyScalar","applyEuler","pos","newPosition","x","z","camRotation","toArray","current","target","y","setLoop","LoopRepeat","play","up","BoundingBox","OrbitControls","EShaderMaterial","shaderMaterial","uTime","value","extend","Wave","getElapsedTime","side","DoubleSide","alphamap","imagePaths","img","Scene","paths","mat","THREE","load","background","environment","useSkybox","random","min","max","MainScene","intensity","color","Array","fill","ji","Scene1","Stats","Scene2","App","mode","setMode","style","width","height","onClick","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.4360c50a.chunk.js","sourcesContent":["import { useTexture } from \"@react-three/drei\"\nimport { Suspense } from \"react\"\n\nfunction Fire(props) {\n  const colorMap = useTexture('assets/fire/fire.png')\n\n    return (\n      <Suspense fallback={null} >\n        <sprite scale={2} {...props}>\n          <spriteMaterial map={colorMap} alphaMap={colorMap}/>\n        </sprite>\n      </Suspense>\n    )\n}\n  \nexport default Fire","import  { useBox } from \"@react-three/cannon\";\nimport Fire from \"./Fire/Fire\";\n\nfunction CubePhysical(props) {\n  const [ref] = useBox(() => ({ mass: 0.2, position: [0, 5, 0], velocity: [0, 4, 0], ...props }));\n  \n  return (\n    <>\n      <Fire/>\n      <mesh ref={ref}>\n        <boxBufferGeometry />\n        <meshPhysicalMaterial />\n      </mesh>\n      </>\n    );\n}\n  \nexport default CubePhysical;","\nimport { useLoader } from '@react-three/fiber';\nimport { useRef } from 'react';\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader';\n\nconst PlaneModel = props => {\n    const modelRef = useRef();\n\n    const model = useLoader(\n            GLTFLoader,\n            process.env.PUBLIC_URL + props.path\n        )\n   \n  return (\n      <group ref={modelRef}  >\n        <mesh rotation={[Math.PI / 2,0, 0]} >\n            {/* <meshPhysicalMaterial wireframe /> */}\n            <primitive object={model.scene} scale={[1.5,1.5,1.5]} position={props.position} />;\n         </mesh>\n    </group>\n  )  \n}\n\nexport default PlaneModel","import { usePlane } from \"@react-three/cannon\";\n// import PlainAnimModel from \"./PlainAnimModel\";\nimport PlaneModel from \"./PlaneModel\";\n\n\nfunction Plane(props) {\n    const [ref] = usePlane(() => ({ rotation: [- Math.PI / 2, 0, 0], ...props }));\n    return (\n      <mesh ref={ref}>\n        <PlaneModel path=\"/assets/map2/BASKETBALL/BASKETBALL.gltf\" position={[15,-24,13]}/>\n        <PlaneModel path=\"/assets/map2/BASE2/BASE.gltf\" position={[15,-24,13]}/>\n        <PlaneModel path=\"/assets/map2/TEST/TEST.gltf\" position={[15,-24,13]}/>\n        {/* <PlainAnimModel path=\"/assets/water/ocean_wave_test.gltf\"/> */}\n        {/* <planeBufferGeometry args={[100, 100]} /> */}\n      </mesh>\n    );\n}\n\n\nexport default Plane\n\n  \n","import { useState, useEffect } from \"react\";\n\nfunction moveFieldByKey(key) {\n  const keys = {\n    KeyW: \"moveForward\",\n    KeyS: \"moveBackward\",\n    KeyA: \"moveLeft\",\n    KeyD: \"moveRight\",\n    Space: \"jump\",\n  };\n  return keys[key];\n}\n\nexport const useKeyboard = () => {\n  const [movement, setMovement] = useState({\n    moveForward: false,\n    moveBackward: false,\n    moveLeft: false,\n    moveRight: false,\n    jump: false,\n  });\n\n  useEffect(() => {\n    const handleKeyDown = (e) => {\n      setMovement((m) => ({\n        ...m,\n        [moveFieldByKey(e.code)]: true,\n      }));\n    };\n    const handleKeyUp = (e) => {\n      setMovement((m) => ({\n        ...m,\n        [moveFieldByKey(e.code)]: false,\n      }));\n    };\n\n    document.addEventListener(\"keydown\", handleKeyDown);\n    document.addEventListener(\"keyup\", handleKeyUp);\n\n    return () => {\n      document.removeEventListener(\"keydown\", handleKeyDown);\n      document.removeEventListener(\"keyup\", handleKeyUp);\n    };\n  }, []);\n\n  return movement;\n};\n","import { atom } from 'recoil';\n\nexport const $player = atom({\n  key: 'position',\n  default: {position:[0,0,0], rotation:[0,0,0]}\n});\n\nexport const $camera = atom({\n  key: 'camera',\n  default: {position:[0,0,0], rotation:[0,0,0]}\n});\n\n\nexport const $socket = atom({\n  key: 'socket',\n  default: undefined\n});\n","import { useBox } from \"@react-three/cannon\";\nimport { useFrame } from \"@react-three/fiber\";\nimport { useRecoilValue } from \"recoil\";\nimport { $player } from \"../../state\";\n\nconst BoundingBoxPhysical = ({\n  position = [0, 0, 0],\n  offset = [0, 0, 0],\n  dims = [1, 1, 1],\n  visible = false,\n  children,\n}) => {\n  const [ref, api] = useBox(() => ({ mass: 1, args: dims, position }));\n  const {position:pPosition, rotation} = useRecoilValue($player);\n\n\n  useFrame(({ clock }) => {\n    api.position.set(\n      pPosition[0],pPosition[1],pPosition[2]\n    );\n    api.rotation.set(\n      rotation[0], rotation[1], rotation[2]\n    );\n  });\n  \n\n\n  return (\n    <group ref={ref} api={api}>\n      <mesh scale={dims} visible={visible}>\n        <boxBufferGeometry />\n        <meshPhysicalMaterial wireframe />\n      </mesh>\n      <group position={offset}>{children}</group>\n    </group>\n  );\n};\n\nexport default BoundingBoxPhysical;\n","import { FirstPersonControls, FlyControls, OrbitControls, PerspectiveCamera, PointerLockControls, TrackballControls } from \"@react-three/drei\";\nimport { useFrame, useLoader, useThree } from \"@react-three/fiber\";\nimport { useEffect, useRef, useState } from \"react\";\nimport { useSetRecoilState } from \"recoil\";\nimport { AnimationMixer, LoopRepeat, Vector3 } from \"three\";\nimport { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader\";\nimport { useKeyboard } from \"../../hooks/useKeyboard\";\nimport { $player } from \"../../state\";\nimport BoundingBox from \"./BoundingBox\";\n\nconst PlayerModel = (props) => {\n\n  const orbitRef = useRef()\n  const [animState, setAnimState] = useState(0);\n\n  const modelRef = useRef();\n  const {\n    moveForward,\n    moveBackward,\n    moveLeft,\n    moveRight,} = useKeyboard()\n\n  const { path } = props;\n  const model = useLoader(GLTFLoader, path);\n\n  const setPlayerPosition = useSetRecoilState($player);\n\n  const { camera } = useThree();\n  \n  let mixer;\n  mixer = new AnimationMixer(model.scene);\n  const action_idle = mixer.clipAction(model.animations[props.idleIndex ?? 0]);\n  const action_walk = mixer.clipAction(model.animations[props.walkIndex ?? 1]);\n  if (model.animations.length > 0) {\n    mixer.stopAllAction();\n  }\n\n  useFrame((scene, delta) => {\n    if (moveForward | moveBackward | moveLeft | moveRight) {\n      setAnimState(1) // 1 : walk\n    }\n    else setAnimState(0) // 0: idle\n    mixer.update(delta);\n  });\n\n  useFrame(({ clock }) => {\n    \n    const direction = new Vector3();\n    const frontVector = new Vector3(\n      0,\n      0,\n      Number(moveBackward) - Number(moveForward)\n      );\n      const sideVector = new Vector3(Number(moveLeft) - Number(moveRight), 0, 0);\n      direction\n      .subVectors(frontVector, sideVector)\n      .normalize()\n      .multiplyScalar(0.1)\n      .applyEuler(camera.rotation);\n      \n      setPlayerPosition(pos => {\n        \n        const newPosition = [\n          pos.position[0] + direction.x,\n          1,\n          pos.position[2] + direction.z,\n        ]\n        const camRotation = camera.rotation.toArray()\n        orbitRef.current.target.position = (new Vector3(newPosition[0], camera.position.y, newPosition[2]));\n        return {\n          position:newPosition,\n          rotation: [0, (camRotation[2]+Math.PI), 0]\n        }\n      });\n    }\n  );\n\n  useEffect(() => {\n    mixer.stopAllAction();\n    switch (animState) {\n      case 1:\n        action_walk.setLoop(LoopRepeat);    \n        action_walk.play();\n        break;\n      default:\n        action_idle.setLoop(LoopRepeat);\n        action_idle.play();\n      break;\n    }\n}, [animState,action_walk,action_idle, mixer])\n\n  return (\n    <group ref={modelRef} up={[0, 1, 0]}>\n      <BoundingBox\n        visible\n        up={[0, 0, 0]}\n        position={[0, 2.4, 0]}\n        dims={[1.5, 2, 1.5]}\n        rotation={[0, 0, 0]}\n      >\n        <OrbitControls ref={orbitRef}/>\n        <primitive\n          object={model.scene}\n          path={props.path}\n          scale={[2, 2, 2]}\n          position={[0, -1, 0]}\n        />\n      </BoundingBox>\n    </group>\n  );\n};\n\nexport default PlayerModel;\n","import { shaderMaterial } from \"@react-three/drei\";\nimport { extend, useFrame } from \"@react-three/fiber\";\nimport glsl from \"babel-plugin-glsl/macro\";\nimport React, { useRef } from \"react\";\nimport { DoubleSide } from \"three\";\n// import \"./App.css\";\n\nexport const vertexShader = glsl`\n// Uniforms are data that are shared between shaders\n// The contain data that are uniform across the entire frame.\n// The heightmap and scaling constant for each point are uniforms in this respect.\n\n// A uniform to contain the heightmap image\nuniform sampler2D bumpTexture;\n// A uniform to contain the scaling constant\nuniform float bumpScale;\nuniform float uTime;\n\n// Varyings are variables whose values are decided in the vertext shader\n// But whose values are then needed in the fragment shader\n\n// A variable to store the height of the point\nvarying float vAmount;\n// The UV mapping coordinates of a vertex\nvarying vec2 vUV;\n\nvoid main()\n{\n    // The \"coordinates\" in UV mapping representation\n    vUV = uv;\n\n    // The heightmap data at those coordinates\n    vec4 bumpData = texture2D(bumpTexture, uv);\n\n    // height map is grayscale, so it doesn't matter if you use r, g, or b.\n    vAmount = bumpData.r;\n\n    // move the position along the normal\n    vec3 newPosition = position + normal * bumpScale * vAmount;\n\n    // Compute the position of the vertex using a standard formula\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(newPosition, 1.0);\n}\n`;\n\nexport const fragmentShader = glsl`\nvarying vec2 vUV;\nvarying float vAmount;\nuniform float uTime;\n\nvoid main()\n{\n    gl_FragColor = vec4(sin(uTime*5.0), vAmount, 0.0, 1.0);\n}\n`;\n\n\nconst EShaderMaterial = shaderMaterial(\n  // Uniform\n  {\n    uTime: {value:0},\n  },\n  vertexShader,\n  fragmentShader\n  // Vertex Shader\n  // glsl`\n  // void main() {\n  //   gl_Position = projectionMatrix * modelViewMatrix * vec4(2.0,1.0,1.0, 1.0);  \n  // }\n  // `,\n  // // Fragment Shader\n  // glsl`\n  //   void main() {\n  //     gl_FragColor = vec4(1.0, 0.0, 0.5, 0.5).rgba;\n  //   }\n  // `\n);\n\nextend({ EShaderMaterial });\n\nconst Wave = () => {\n  const ref = useRef();\n  useFrame(({ clock }) => (ref.current.uTime = clock.getElapsedTime()));\n\n\n  return (\n    <mesh position={[1,1,1]}>\n      <boxBufferGeometry args={[1, 1, 1]} />\n      <eShaderMaterial ref={ref}  side={DoubleSide} alphamap/>\n      <planeBufferGeometry args={[10, 10, 16, 16]} />\n    </mesh>\n  );\n};\n\nexport default Wave;\n","import React, { Suspense, useEffect } from \"react\";\nimport { useThree , Canvas} from \"@react-three/fiber\";\nimport * as THREE from \"three\";\n// import { DoubleSide } from \"three\";\n\n// function Thing() {\n//   const ref = useRef<typeof Box>();\n//   useFrame(\n//     () =>\n//       ref.current && (ref.current.rotation.x = ref.current.rotation.y += 0.01)\n//   );\n//   return (\n//     <Box\n//       ref={ref}\n//       args={[1, 1, 1]}\n//       onClick={(e) => console.log(\"click\")}\n//       onPointerOver={(e) => console.log(\"hover\")}\n//       onPointerOut={(e) => console.log(\"unhover\")}\n//     >\n//       <meshNormalMaterial attach=\"material\" />\n//     </Box>\n//   );\n// }\n\n// const path = \"/assets/city-sky/\";\n// const images = ['back','front',  'top', 'bottom',  'left', 'right',]\n\n// const images = [\"nx1.jpg\", \"px2.png\",\"ny1.jpg\",\"py2.jpg\",\"pz2.png\",\"nz1.png\" ,];\n\nconst path = \"/assets/skyboxes/city/\";\nconst images = [\"px.png\",\"nx.png\", \"py.png\",\"ny.png\",\"nz.png\",\"pz.png\"];\n\n// const ext = \".png\";\n\nconst imagePaths = images.map((img) => path + img );\n\n// function Planet() {\n//   const { scene, scenes, animations, cameras, asset, materials } = useLoader(\n//     GLTFLoader,\n//     \"./Earth/CHAHIN_EARTH.gltf\"\n//   );\n\n//   const ref = useRef();\n\n//   useFrame(() => ref.current && (ref.current.rotation.y += 0.01));\n\n//   return <primitive ref={ref} object={scene} />;\n// }\n\nconst useSkybox = (paths) => {\n  const { scene } = useThree();\n\n  useEffect(() => {\n    const loader = new THREE.CubeTextureLoader();\n    const mat = loader.load(paths);\n    scene.background = mat;\n    scene.environment = mat;\n  }, [paths, scene.background, scene]);\n\n  return null;\n};\n\nexport function Scene() {\n  useSkybox(imagePaths);\n\n  return (\n    <>\n      {/* <ambientLight />\n      <pointLight ref={light} args={[2, 2, 2]} /> */}\n      {/* <Text fontSize={1}>spaceyboi</Text> */}\n      {/* <Dodecahedron args={[10]}> */}\n        {/* <meshPhysicalMaterial\n          color=\"white\"\n          metalness={0.99}\n          roughness={0.012}\n          transparency={0.5}\n          refractionRatio={0.82}\n          transparent\n          side={DoubleSide}\n        /> */}\n      {/* </Dodecahedron> */}\n      {/* <Planet /> */}\n    </>\n  );\n}\n\nexport function SkyBoxApp() {\n  return (\n    <Canvas style={{ background: \"black\" }}>\n      <Suspense fallback={null}>\n        <Scene />\n        {/* <Effects /> */}\n      </Suspense>\n    </Canvas>\n  );\n}\n","\n\nexport function random(min, max) {\n return   Math.random() * (max - min) + min\n}\n\nexport function randomInt(min, max) {\n    return random(min, max).floor();\n}\n\nexport function randomVec3(min, max) { \n    return [random(-1, 1), random(-1, 1), random(-1, 1)];\n}","// import Box from './components/Box';\nimport { Physics } from \"@react-three/cannon\";\nimport { Stats } from \"@react-three/drei\";\nimport { Canvas } from \"@react-three/fiber\";\nimport { Suspense } from \"react\";\nimport { RecoilRoot } from \"recoil\";\nimport CubePhysical from \"../components/CubePhysical\";\nimport Plane from \"../components/Plane/Plane\";\nimport PlayerModel from \"../components/PlayerModel/PlayerModel\";\nimport SP from \"../components/ShaderPlane/ShaderPlane\";\nimport { Scene as SkyBoxcene } from \"../components/SkyBox/SkyBox\";\nimport { random } from \"../utils/getRandom\";\nimport \"./Scene1.css\";\n\n// socket.on(\"connect\", (msg) => {\n//   socket.emit(\"message-client\", `연결됨.`);\n//   console.log(\"connected\", msg);\n//   socket.emit(\"name\", \"Tom\");\n// });\n// socket.on(\"seq-num\", (msg) => {\n//   // setCounter(msg)\n//   console.info(msg)\n// });\n// socket.on(\"message\", (msg) => {\n//   // addMessage(msg);\n//   console.info(msg);\n// });\n// return socket.emit('end');\n\nfunction MainScene() {\n  // useFrame(({clock}) => {\n  //   // console.log('orbitRef.current.target.position', clock,orbitRef.current.target.position)\n  //   orbitRef.current.target.postiion = new Vector3(7*Math.sin(clock.elapsedTime), 7, 7*Math.cos(clock.elapsedTime))\n  //   orbitRef.current.update();\n  // })\n\n  return (\n    <>\n      <ambientLight intensity={0.2} color=\"#FAAD37\" />\n      <directionalLight position={[70, 100, 0]} color=\"#FAAD37\" intensity={1} />\n      {/* <Box position={[1,1,1]} /> */}\n\n      {/* <pointLight position={[0, 10, 0]} color=\"red\" intensity={11} /> */}\n      {/* <SpotLight position={[0, 2, 2]} color=\"red\" intensity={11} castShadow angle={0.5} decay={1} distance={20} penumbra={1}/> */}\n      {/* <pointLight position={[-70, 80, -20]} color=\"red\" intensity={0.1} /> */}\n      {/* todo: use camera of recoil and update its target position, use lookat ? or worldDrirection ? and compute its direction */}\n      {/* <OrbitControls ref={orbitRef} minDistance={1} maxDistance={20} target={[0,2.5,0]}/> */}\n      {/* <PointerLockControls ref={orbitRef} minDistance={1} maxDistance={20} target={[0,2.5,0]}/> */}\n      <SkyBoxcene />\n      <SP />\n      <Suspense fallback={null}>\n        <Plane />\n        {new Array(15).fill(0).map((ji) => {\n          return (\n            <CubePhysical\n              position={[random(-4, 4), random(1, 10), random(-4, 4)]}\n              scale={[0.1, 0.1, 0.15]}\n              rotation={[random(0.1, 25), 0, 0]}\n            />\n          );\n        })}\n        <PlayerModel\n          path={process.env.PUBLIC_URL + \"assets/marie_survivor/scene.gltf\"}\n          walkIndex={15}\n          idleIndex={0}\n        />\n        {/* <PlayerSimpleModel path={process.env.PUBLIC_URL + \"assets/marie_survivor/scene.gltf\"} /> */}\n      </Suspense>\n    </>\n  );\n}\n\nfunction Scene1() {\n  return (\n    <>\n      <Canvas camera={{ position: [7, 7, 7] }}>\n        <RecoilRoot>\n          <Physics>\n            <MainScene />\n          </Physics>\n          <Stats />\n        </RecoilRoot>\n      </Canvas>\n    </>\n  );\n}\n\nexport default Scene1;\n","// import SocketClient from \"../components/SocketClient\";\n\nfunction Scene2() { \n  return (\n    <>\n    {/* <SocketClient/> */}\n    </>\n  );\n}\n\nexport default Scene2;\n","// import Box from './components/Box';\nimport { useState } from \"react\";\nimport Scene1 from \"./Scenes/Scene1\";\nimport Scene2 from \"./Scenes/Scene2\";\n\nfunction App() {\n  const [mode, setMode] = useState(0)\n  return (\n    <div style={{width:'100%', height:'100%'}}>\n      {\n        mode === 1 ?\n          <Scene1 /> :\n        mode === 2 ?\n          <Scene2 /> :\n          (<><button onClick={() => setMode(1)}>\n            시작하기1\n          </button><button onClick={() => setMode(2)}>\n            시작하기2\n          </button></>)\n      }\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}