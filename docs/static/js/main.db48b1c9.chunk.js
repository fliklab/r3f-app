(this["webpackJsonpr3f-template"]=this["webpackJsonpr3f-template"]||[]).push([[0],{47:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){"use strict";n.r(t);var c=n(5),i=n.n(c),o=n(30),r=n.n(o),a=(n(47),n(9)),s=n(21),j=n(56),b=n(15),u=n(19),l=n(7),f=n(10);var p=function(e){var t=Object(s.b)((function(){return Object(l.a)({mass:.2,position:[0,5,0],velocity:[0,4,0]},e)})),n=Object(a.a)(t,1)[0];return Object(f.jsxs)("mesh",{ref:n,children:[Object(f.jsx)("boxBufferGeometry",{}),Object(f.jsx)("meshPhysicalMaterial",{})]})},O="https://fliklab.github.io/r3f-app",d=n(41),m=function(e){var t=Object(c.useRef)(),n=Object(b.e)(d.a,e.path);return Object(f.jsx)("mesh",{ref:t,rotation:[Math.PI/2,0,0],children:Object(f.jsx)("primitive",{object:n.scene,scale:[1.5,1.5,1.5],position:e.position})})};var h=function(e){var t=Object(s.c)((function(){return Object(l.a)({rotation:[-Math.PI/2,0,0]},e)})),n=Object(a.a)(t,1)[0];return Object(f.jsxs)("mesh",{ref:n,receiveShadow:!0,children:[Object(f.jsx)(m,{path:O+"/assets/map2/BASKETBALL/BASKETBALL.gltf",position:[15,-24,13]}),Object(f.jsx)(m,{path:O+"/assets/map2/BASE2/BASE.gltf",position:[15,-24,13]}),Object(f.jsx)(m,{path:O+"/assets/map2/TEST/test.gltf",position:[15,-24,13]})]})},x=n(55),v=n(0),g=n(37),y=n(13);function k(e){return{KeyW:"moveForward",KeyS:"moveBackward",KeyA:"moveLeft",KeyD:"moveRight",Space:"jump"}[e]}var w=Object(u.b)({key:"position",default:{position:[0,0,0],rotation:[0,0,0]}}),A=(Object(u.b)({key:"camera",default:{position:[0,0,0],rotation:[0,0,0]}}),function(e){var t=e.position,n=void 0===t?[0,0,0]:t,i=e.offset,o=void 0===i?[0,0,0]:i,r=e.dims,j=void 0===r?[1,1,1]:r,l=e.visible,p=void 0!==l&&l,O=e.children,d=Object(s.b)((function(){return{mass:1,args:j,position:n}})),m=Object(a.a)(d,2),h=m[0],x=m[1],v=Object(u.c)(w),g=v.position,y=v.rotation;return Object(b.d)((function(e){e.clock;x.position.set(g[0],g[1],g[2]),x.rotation.set(y[0],y[1],y[2])})),Object(f.jsxs)("group",{ref:h,api:x,children:[Object(f.jsxs)("mesh",{scale:j,visible:p,children:[Object(f.jsx)("boxBufferGeometry",{}),Object(f.jsx)("meshPhysicalMaterial",{wireframe:!0})]}),Object(f.jsx)(c.Suspense,{fallabck:Object(f.jsxs)("mesh",{scale:j,visible:p,children:[Object(f.jsx)("boxBufferGeometry",{}),Object(f.jsx)("meshPhysicalMaterial",{wireframe:!0})]}),children:Object(f.jsx)("group",{position:o,children:O})})]})}),L=function(e){var t,n=Object(c.useRef)(),i=Object(c.useState)(0),o=Object(a.a)(i,2),r=o[0],s=o[1],j=Object(c.useRef)(),p=function(){var e=Object(c.useState)({moveForward:!1,moveBackward:!1,moveLeft:!1,moveRight:!1,jump:!1}),t=Object(a.a)(e,2),n=t[0],i=t[1];return Object(c.useEffect)((function(){var e=function(e){i((function(t){return Object(l.a)(Object(l.a)({},t),{},Object(y.a)({},k(e.code),!0))}))},t=function(e){i((function(t){return Object(l.a)(Object(l.a)({},t),{},Object(y.a)({},k(e.code),!1))}))};return document.addEventListener("keydown",e),document.addEventListener("keyup",t),function(){document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}}),[]),n}(),O=p.moveForward,d=p.moveBackward,m=p.moveLeft,h=p.moveRight,L=e.fbxPath,S=e.idlePath,B=Object(b.e)(g.a,L),E=Object(b.e)(g.a,S),F=B.animations,M=E.animations[0],P=Object(u.d)(w),R=Object(b.f)().camera,T=(t=new v.AnimationMixer(B)).clipAction(M),C=t.clipAction(F[0]);F.length>0&&t.stopAllAction(),Object(b.d)((function(e,n){s(O|d|m|h?1:0),t.update(n)})),Object(b.d)((function(e){e.clock;var t=new v.Vector3,c=new v.Vector3(0,0,Number(d)-Number(O)),i=new v.Vector3(Number(m)-Number(h),0,0);t.subVectors(c,i).normalize().multiplyScalar(.1).applyEuler(R.rotation),P((function(e){var c=[e.position[0]+t.x,1,e.position[2]+t.z],i=R.rotation.toArray();return R.position.copy(new v.Vector3(c[0]+10*Math.sin(i[1]),3,c[2]+10*Math.cos(i[1]))),n.current.target=new v.Vector3(c[0],R.position.y,c[2]),n.current.update(),{position:c,rotation:[0,i[1]+Math.PI,0]}}))})),Object(c.useEffect)((function(){if(t.stopAllAction(),1===r)C.setLoop(v.LoopRepeat),C.play();else T.setLoop(v.LoopRepeat),T.play()}),[r,C,T,t]);var I=new v.MeshBasicMaterial({color:16777215});return B.children[1].material[0].color=I.color,Object(f.jsxs)("group",{ref:j,up:[0,1,0],children:[Object(f.jsx)(x.a,{ref:n}),Object(f.jsx)(A,{visible:!0,up:[0,0,0],dims:[1.5,2,1.5],children:Object(f.jsx)("primitive",{object:B,path:e.path,scale:[.014,.014,.014],position:[0,-.9,0]})})]})},S=["px.png","nx.png","py.png","ny.png","nz.png","pz.png"].map((function(e){return"/assets/skyboxes/city/"+e}));function B(){return function(e){var t=Object(b.f)().scene;Object(c.useEffect)((function(){var n=(new v.CubeTextureLoader).load(e);t.background=n,t.environment=n}),[e,t.background,t])}(S),Object(f.jsx)(f.Fragment,{})}function E(e,t){return Math.random()*(t-e)+e}n(52);function F(){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("ambientLight",{intensity:.2,color:"#FAAD37"}),Object(f.jsx)("directionalLight",{position:[70,100,0],color:"#FAAD37",intensity:1}),Object(f.jsx)(B,{}),Object(f.jsxs)(c.Suspense,{fallback:null,children:[Object(f.jsx)(h,{}),new Array(15).fill(0).map((function(e){return Object(f.jsx)(p,{position:[E(-4,4),E(1,10),E(-4,4)],scale:[.1,.1,.15],rotation:[E(.1,25),0,0]})})),Object(f.jsx)(L,{fbxPath:O+"assets/Walking/Walking.fbx",idlePath:O+"assets/Walking/Idle.fbx"})]})]})}var M=function(){return Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(b.a,{camera:{position:[7,7,7]},children:Object(f.jsxs)(u.a,{children:[Object(f.jsx)(s.a,{children:Object(f.jsx)(F,{})}),Object(f.jsx)(j.a,{})]})})})};var P=function(){return Object(f.jsx)(f.Fragment,{})};var R=function(){var e=Object(c.useState)(0),t=Object(a.a)(e,2),n=t[0],i=t[1];return Object(f.jsx)("div",{style:{width:"100%",height:"100%"},children:1===n?Object(f.jsx)(M,{}):2===n?Object(f.jsx)(P,{}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{onClick:function(){return i(1)},children:"\uc2dc\uc791\ud558\uae301"}),Object(f.jsx)("button",{onClick:function(){return i(2)},children:"\uc2dc\uc791\ud558\uae302"})]})})},T=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,57)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,o=t.getLCP,r=t.getTTFB;n(e),c(e),i(e),o(e),r(e)}))};r.a.render(Object(f.jsx)(i.a.StrictMode,{children:Object(f.jsx)(R,{})}),document.getElementById("root")),T()}},[[53,1,2]]]);
//# sourceMappingURL=main.db48b1c9.chunk.js.map